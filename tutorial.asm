INCLUDE "hardware.inc"



SECTION "Header", ROM0[$100]

	jp EntryPoint
	ds $150 - @, 0


EntryPoint:
	; disable audio
	ld a, 0
	ld [rNR52], a


; Main game loop
; Setup screen, copy tiles, set titlemap, turn on screen
call WaitVBlank
call CopyTiles
call CopyTileMap
call TurnOnLCD

; Lockup
Done:
	jp Done
	


; FUNCTIOn ROUTINES

; Check if LCD in vertical blank
; If yes, turn off screen
; Otherwise, continue loop until screen is in vertical blank (>= 144).
WaitVBlank:
	ld a, [rLY]
	cp 144
	jp c, WaitVBlank

	; 
	ld a, 0
	ld [rLCDC], a
	ret
	
; Loop through all bytes of the tileset, copying them to VRAM one by one
CopyTiles:
	ld de, Tiles
	ld hl, $8000
	ld bc, TilesEnd - Tiles
CopyTilesLoop:
	ld a, [de]
	ld [hli], a
	inc de
	dec bc
	ld a, b
	or a, c
	jp nz, CopyTilesLoop
	ret
	
; Loop through all bytes of the tilemap, copying them to VRAM one by one
CopyTileMap:
	ld de, Tilemap
	ld hl, $9C00
	ld bc, TilemapEnd - Tilemap
CopyTilemapLoop:
	ld a, [de]
	ld [hli], a
	inc de
	dec bc
	ld a, b
	or a, c
	jp nz, CopyTilemapLoop
	ret

; Turn the LCD on and load background palette
TurnOnLCD:
	ld a, %10011001
	ld [rLCDC], a
	ld a, %11100100
	ld [rBGP], a
	ret
	


SECTION "Tile data", ROM0

Tiles:
DB $00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00
DB $00,$FF,$00,$FF,$00,$FF,$00,$FF
DB $00,$FF,$00,$FF,$00,$FF,$00,$FF
DB $FF,$00,$FF,$00,$FF,$00,$FF,$00
DB $FF,$00,$FF,$00,$FF,$00,$FF,$00
DB $01,$01,$02,$02,$04,$04,$08,$08
DB $10,$10,$20,$20,$40,$40,$80,$80
DB $80,$80,$40,$40,$20,$20,$10,$10
DB $08,$08,$04,$04,$02,$02,$01,$01
DB $FF,$FF,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00
TilesEnd:

SECTION "Tilemap", ROM0

Tilemap:
DB $01,$01,$01,$01,$01,$01,$01,$01,$01,$01
DB $01,$01,$01,$01,$01,$01,$01,$01,$01,$01
DB $01,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$01,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$01,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$01,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$01,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$01,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$01,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$01,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$01,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $01,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $01,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$01,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$01,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$01,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$01,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$01,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$01,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$01,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $03,$04,$00,$00,$00,$00,$00,$00,$01,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $01,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$03,$00,$00,$04,$00,$00,$00,$00,$00
DB $01,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$01,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$03,$00,$00,$00,$00,$04,$00,$00
DB $00,$00,$01,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$01,$00,$00,$00,$00,$00
DB $00,$00,$00,$03,$00,$00,$00,$00,$00,$00
DB $04,$00,$00,$00,$01,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$01,$00,$00,$00
DB $00,$00,$00,$00,$03,$00,$00,$00,$00,$00
DB $00,$00,$00,$04,$00,$00,$01,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$01,$00
DB $00,$00,$00,$00,$00,$03,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00,$04,$06,$01,$00
DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $02,$02,$02,$02,$02,$02,$02,$02,$02,$02
DB $02,$02,$02,$02,$02,$02,$02,$02,$02,$02
DB $02,$00,$00,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$02,$02,$02,$02,$02,$02,$02,$02
DB $02,$02,$02,$02,$02,$02,$02,$02,$02,$02
DB $02,$02,$02,$00,$00,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$02,$02,$02,$02,$02,$02
DB $02,$02,$02,$02,$02,$02,$02,$02,$02,$02
DB $02,$02,$02,$02,$02,$00,$00,$00,$00,$00
DB $00,$00,$00,$00,$00,$00
TilemapEnd:
